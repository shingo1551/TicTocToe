import{g as e,f as t,r as s,h as n}from"./p-9f302888.js";const o=e=>!("isConnected"in e)||e.isConnected,a=(()=>{let e;return(...t)=>{e&&clearTimeout(e),e=setTimeout((()=>{e=0,(e=>{for(let t of e.keys())e.set(t,e.get(t).filter(o))})(...t)}),2e3)}})(),r=[Array(9).fill(null)],{state:l,onChange:i}=(()=>{const s=((e,t=((e,t)=>e!==t))=>{let s=new Map(Object.entries(null!=e?e:{}));const n={dispose:[],get:[],set:[],reset:[]},o=()=>{s=new Map(Object.entries(null!=e?e:{})),n.reset.forEach((e=>e()))},a=e=>(n.get.forEach((t=>t(e))),s.get(e)),r=(e,o)=>{const a=s.get(e);t(o,a,e)&&(s.set(e,o),n.set.forEach((t=>t(e,o,a))))},l="undefined"==typeof Proxy?{}:new Proxy(e,{get:(e,t)=>a(t),ownKeys:()=>Array.from(s.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(e,t)=>s.has(t),set:(e,t,s)=>(r(t,s),!0)}),i=(e,t)=>(n[e].push(t),()=>{((e,t)=>{const s=e.indexOf(t);s>=0&&(e[s]=e[e.length-1],e.length--)})(n[e],t)});return{state:l,get:a,set:r,on:i,onChange:(t,s)=>{const n=i("set",((e,n)=>{e===t&&s(n)})),o=i("reset",(()=>s(e[t])));return()=>{n(),o()}},use:(...e)=>e.forEach((e=>{e.set&&i("set",e.set),e.get&&i("get",e.get),e.reset&&i("reset",e.reset)})),dispose:()=>{n.dispose.forEach((e=>e())),o()},reset:o}})({history:r,step:0,xIsNext:!0,squares:r[0],winner:null,status:null},void 0);return(({on:s})=>{const n=new Map;"function"==typeof e&&(s("dispose",(()=>{n.clear()})),s("get",(t=>{const s=e();s&&((e,t,s)=>{const n=e.get(t);n?n.includes(s)||n.push(s):e.set(t,[s])})(n,t,s)})),s("set",(e=>{const s=n.get(e);s&&n.set(e,s.filter(t)),a(n)})),s("reset",(()=>{n.forEach((e=>e.forEach(t))),a(n)})))})(s),s})();function c(e){const t=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(let s=0;s<t.length;s++){const[n,o,a]=t[s],r=e[n];if(r&&r===e[o]&&r===e[a])return r}return null}function p(){sessionStorage.setItem("game",JSON.stringify({history:l.history,step:l.step}))}i("step",(e=>{l.xIsNext=e%2==0,l.squares=l.history[e],l.winner=c(l.squares),l.status=l.winner?"Winner: "+l.winner:"Next player: "+(l.xIsNext?"X":"O"),p()})),function(){const e=sessionStorage.getItem("game");if(e){const t=JSON.parse(e);l.history=t.history,l.step=t.step}}();const u=class{constructor(e){s(this,e)}render(){console.log("board");const e=l.squares;return n("div",null,n("div",{class:"board-row"},n("app-square",{index:0,label:e[0]}),n("app-square",{index:1,label:e[1]}),n("app-square",{index:2,label:e[2]})),n("div",{class:"board-row"},n("app-square",{index:3,label:e[3]}),n("app-square",{index:4,label:e[4]}),n("app-square",{index:5,label:e[5]})),n("div",{class:"board-row"},n("app-square",{index:6,label:e[6]}),n("app-square",{index:7,label:e[7]}),n("app-square",{index:8,label:e[8]})))}};u.style='.board-row:after{clear:both;content:"";display:table}';const d=class{constructor(e){s(this,e)}render(){return console.log("game"),n("div",{class:"game"},n("app-board",null),n("app-info",null))}};d.style=".game{display:flex;flex-direction:row}";const f=class{constructor(e){s(this,e)}render(){console.log("info");const e=l.history.map(((e,t)=>n("li",{key:t},n("button",{onClick:()=>l.step=t},t?"Go to step #"+t:"Go to game start"))));return n("div",{class:"game-info"},n("div",null,l.status),n("ol",null,e))}};f.style="ol,ul{padding-left:30px}.status{margin-bottom:10px}.game-info{margin-left:20px}";const g=class{constructor(e){s(this,e)}render(){return console.log("square",this.index),n("button",{class:"square",onClick:()=>function(e){const t=l.history.slice(0,l.step+1),s=t[t.length-1].slice();c(s)||s[e]||(s[e]=l.xIsNext?"X":"O",l.history=[...t,s],l.step=t.length,p())}(this.index)},this.label)}};g.style=".square{background:#fff;border:1px solid #999;float:left;font-size:24px;font-weight:bold;line-height:34px;height:34px;margin-right:-1px;margin-top:-1px;padding:0;text-align:center;width:34px}.square:focus{outline:none}.kbd-navigation .square:focus{background:#ddd}";export{u as app_board,d as app_game,f as app_info,g as app_square}